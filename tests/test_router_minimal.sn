# Minimal test - handle request

import "../src/http/router"

fn homeHandler(req: HttpRequest): HttpResponse =>
    return HttpResponse.ok().text("Home")

fn main(): void =>
    print("Creating router\n")
    var router: Router = Router.new()
    print("Adding route\n")
    router.get("/", homeHandler)
    print("Creating request\n")
    var req: HttpRequest = HttpRequest.parse("GET / HTTP/1.1\r\n\r\n")
    print("Handling request\n")
    var res: HttpResponse = router.handle(req)
    print("Done\n")
